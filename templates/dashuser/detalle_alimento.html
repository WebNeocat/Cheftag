
<div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
        <!-- Encabezado del modal -->
        <div class="modal-header bg-success text-white">
            <h2 class="modal-title">Alimento: {{ alimento.nombre }}</h2>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="container">
                <div class="row g-4">
                    <!-- Imagen -->
                    <div class="col-md-4 text-center">
                        <img src="{{ alimento.imagen.url }}" class="img-fluid rounded shadow-sm" alt="{{ alimento.nombre }}" title="{{ alimento.nombre }}">
                    </div>

                    <!-- Descripción y detalles -->
                    <div class="col-md-8">
                        {% if alimento.descripcion %}
                        <p class="fs-6 text-muted">{{ alimento.descripcion }}</p>
                        {% endif %}

                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"><strong>Tipo de alimento:</strong> {{ alimento.tipo_alimento }}</li>
                            <li class="list-group-item"><strong>Conservación:</strong> {{ alimento.conservacion }}</li>
                            <li class="list-group-item"><strong>Localización:</strong> {{ alimento.localizacion }}</li>
                            <li class="list-group-item"><strong>Stock actual:</strong> {{ alimento.stock_actual_format }}</li>
                            <li class="list-group-item"><strong>Stock mínimo:</strong> {{ alimento.stock_minimo_format }}</li>
                        </ul>
                    </div>
                </div>

                <div class="mt-5">
                    <div class="row">
                        <!-- Títulos en la misma fila -->
                        <div class="col text-center">
                            <h4 class="mb-3">Alérgenos</h4>
                        </div>
                        <div class="col text-center">
                            <h4 class="mb-3">Trazas de alérgenos</h4>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Fila de iconos -->
                        <div class="col">
                            {% if alimento.alergenos.all %}
                                <div class="d-flex justify-content-center gap-3 flex-wrap">
                                    {% for alergeno in alimento.alergenos.all %}
                                        <div class="text-center" style="width: 80px;">
                                            {% if alergeno.imagen %}
                                                <img src="{{ alergeno.imagen.url }}" class="img-thumbnail rounded-circle border" alt="{{ alergeno.nombre }}" title="{{ alergeno.nombre }}">
                                            {% else %}
                                                <img src="#" class="img-thumbnail rounded-circle border" alt="{{ alergeno.nombre }}" title="{{ alergeno.nombre }}">
                                            {% endif %}
                                            <small class="d-block mt-1">{{ alergeno.nombre }}</small>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <p class="text-muted fst-italic text-center">Sin alérgenos asociados</p>
                            {% endif %}
                        </div>

                        <div class="col">
                            {% if alimento.trazas.all %}
                                <div class="d-flex justify-content-center gap-3 flex-wrap">
                                    {% for traza in alimento.trazas.all %}
                                        <div class="text-center" style="width: 80px;">
                                            {% if traza.imagen %}
                                                <img src="{{ traza.imagen.url }}" class="img-thumbnail rounded-circle border" alt="{{ traza.nombre }}" title="{{ traza.nombre }}">
                                            {% else %}
                                                <img src="#" class="img-thumbnail rounded-circle border" alt="{{ traza.nombre }}" title="{{ traza.nombre }}">
                                            {% endif %}
                                            <small class="d-block mt-1">{{ traza.nombre }}</small>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <p class="text-muted fst-italic text-center">Sin trazas de alérgenos asociadas</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <!-- Información nutricional -->
                <div class="mt-5">
                    <h4 class="mb-4">Información Nutricional (por 100g)</h4>
                    {% if alimento.nutricion %}
                        <!-- Primeros 4 destacados -->
                        <div class="row g-4 mb-4">
                            <div class="col-md-3 col-6">
                                <div class="card text-center border-0 shadow-sm h-100 bg-success text-white">
                                    <div class="card-body">
                                        <h6 class="fw-bold">Energía</h6>
                                        <p class="display-6">{{ alimento.nutricion.energia }}<small class="fs-6"> kcal</small></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="card text-center border-0 shadow-sm h-100 bg-success text-white">
                                    <div class="card-body">
                                        <h6 class="fw-bold">Carbohidratos</h6>
                                        <p class="display-6">{{ alimento.nutricion.carbohidratos }}<small class="fs-6"> g</small></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="card text-center border-0 shadow-sm h-100 bg-success text-white">
                                    <div class="card-body">
                                        <h6 class="fw-bold">Proteínas</h6>
                                        <p class="display-6">{{ alimento.nutricion.proteinas }}<small class="fs-6"> g</small></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="card text-center border-0 shadow-sm h-100 bg-success text-white">
                                    <div class="card-body">
                                        <h6 class="fw-bold">Grasas</h6>
                                        <p class="display-6">{{ alimento.nutricion.grasas }}<small class="fs-6"> g</small></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Resto en dos columnas estilo tabla -->
                        <div class="row">
                            <div class="col-md-6">
                                <table class="table table-striped align-middle">
                                    <tbody>
                                        <tr><td><strong>Azúcares</strong></td><td class="text-end">{{ alimento.nutricion.azucares }} g</td></tr>
                                        <tr><td><strong>Sal (Sodio)</strong></td><td class="text-end">{{ alimento.nutricion.sal_mg }} mg</td></tr>
                                        <tr><td><strong>Ácido fólico</strong></td><td class="text-end">{{ alimento.nutricion.acido_folico }} µg</td></tr>
                                        <tr><td><strong>Vitamina C</strong></td><td class="text-end">{{ alimento.nutricion.vitamina_c }} g</td></tr>
                                        <tr><td><strong>Vitamina A</strong></td><td class="text-end">{{ alimento.nutricion.vitamina_a }} µg</td></tr>
                                        <tr><td><strong>Zinc</strong></td><td class="text-end">{{ alimento.nutricion.zinc }} mg</td></tr>
                                        <tr><td><strong>Fibra</strong></td><td class="text-end">{{ alimento.nutricion.fibra }} g</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <table class="table table-striped align-middle">
                                    <tbody>
                                        <tr><td><strong>Hierro</strong></td><td class="text-end">{{ alimento.nutricion.hierro }} mg</td></tr>
                                        <tr><td><strong>Calcio</strong></td><td class="text-end">{{ alimento.nutricion.calcio }} mg</td></tr>
                                        <tr><td><strong>Colesterol</strong></td><td class="text-end">{{ alimento.nutricion.colesterol }} mg</td></tr>
                                        <tr><td><strong>Ácidos grasos poliinsaturados</strong></td><td class="text-end">{{ alimento.nutricion.acidos_grasos_polinsaturados }} g</td></tr>
                                        <tr><td><strong>Ácidos grasos monoinsaturados</strong></td><td class="text-end">{{ alimento.nutricion.acidos_grasos_monoinsaturados }} g</td></tr>
                                        <tr><td><strong>Ácidos grasos saturados</strong></td><td class="text-end">{{ alimento.nutricion.acidos_grasos_saturados }} g</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    {% else %}
                        <p class="text-muted fst-italic">No hay información nutricional disponible.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
<script>
// Botón cerrar modal (opcional)
$('.modal .close, .modal .btn-danger').click(function () {
    $('.modal').modal('hide');
    $('.modal-backdrop').remove();
});
</script>
